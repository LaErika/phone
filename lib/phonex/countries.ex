defmodule Phonex.Countries do
  @countries [
    %{regex: ~r/^1(.+)/, module: Phonex.NANP},
    %{regex: ~r/^93(.+)/, module: Phonex.AF},
    %{regex: ~r/^355(.+)/, module: Phonex.AL},
    %{regex: ~r/^213(.+)/, module: Phonex.DZ},
    %{regex: ~r/^376(.+)/, module: Phonex.AD},
    %{regex: ~r/^244(.+)/, module: Phonex.AO},
    %{regex: ~r/^672(.+)/, module: Phonex.AQ},
    %{regex: ~r/^54(.+)/, module: Phonex.AR},
    %{regex: ~r/^374(.+)/, module: Phonex.AM},
    %{regex: ~r/^297(.+)/, module: Phonex.AW},
    %{regex: ~r/^61(.+)/, module: Phonex.AU},
    %{regex: ~r/^43(.+)/, module: Phonex.AT},
    %{regex: ~r/^994(.+)/, module: Phonex.AZ},
    %{regex: ~r/^973(.+)/, module: Phonex.BH},
    %{regex: ~r/^880(.+)/, module: Phonex.BD},
    %{regex: ~r/^375(.+)/, module: Phonex.BY},
    %{regex: ~r/^32(.+)/, module: Phonex.BE},
    %{regex: ~r/^501(.+)/, module: Phonex.BZ},
    %{regex: ~r/^229(.+)/, module: Phonex.BJ},
    %{regex: ~r/^975(.+)/, module: Phonex.BT},
    %{regex: ~r/^591(.+)/, module: Phonex.BO},
    %{regex: ~r/^599(.+)/, module: Phonex.BQ},
    %{regex: ~r/^386(.+)/, module: Phonex.BA},
    %{regex: ~r/^267(.+)/, module: Phonex.BW},
    %{regex: ~r/^55(.+)/, module: Phonex.BR},
    %{regex: ~r/^246(.+)/, module: Phonex.IO},
    %{regex: ~r/^673(.+)/, module: Phonex.BN},
    %{regex: ~r/^359(.+)/, module: Phonex.BG},
    %{regex: ~r/^226(.+)/, module: Phonex.BR},
    %{regex: ~r/^257(.+)/, module: Phonex.BI},
    %{regex: ~r/^855(.+)/, module: Phonex.KH},
    %{regex: ~r/^237(.+)/, module: Phonex.CM},
    %{regex: ~r/^238(.+)/, module: Phonex.CV},
    %{regex: ~r/^236(.+)/, module: Phonex.CF},
    %{regex: ~r/^235(.+)/, module: Phonex.TD},
    %{regex: ~r/^56(.+)/, module: Phonex.CL},
    %{regex: ~r/^86(.+)/, module: Phonex.CN},
    %{regex: ~r/^57(.+)/, module: Phonex.CO},
    %{regex: ~r/^269(.+)/, module: Phonex.KM},
    %{regex: ~r/^242(.+)/, module: Phonex.CG},
    %{regex: ~r/^243(.+)/, module: Phonex.CD},
    %{regex: ~r/^682(.+)/, module: Phonex.CK},
    %{regex: ~r/^506(.+)/, module: Phonex.CR},
    %{regex: ~r/^385(.+)/, module: Phonex.HR},
    %{regex: ~r/^53(.+)/, module: Phonex.CU},
    %{regex: ~r/^599(.+)/, module: Phonex.CW},
    %{regex: ~r/^357(.+)/, module: Phonex.CY},
    %{regex: ~r/^420(.+)/, module: Phonex.CZ},
    %{regex: ~r/^225(.+)/, module: Phonex.CI},
    %{regex: ~r/^45(.+)/, module: Phonex.DK},
    %{regex: ~r/^253(.+)/, module: Phonex.DJ},
    %{regex: ~r/^593(.+)/, module: Phonex.EC},
    %{regex: ~r/^20(.+)/, module: Phonex.EG},
    %{regex: ~r/^503(.+)/, module: Phonex.SV},
    %{regex: ~r/^240(.+)/, module: Phonex.GQ},
    %{regex: ~r/^291(.+)/, module: Phonex.ER},
    %{regex: ~r/^372(.+)/, module: Phonex.EE},
    %{regex: ~r/^251(.+)/, module: Phonex.ET},
    %{regex: ~r/^500(.+)/, module: Phonex.FK},
    %{regex: ~r/^298(.+)/, module: Phonex.FO},
    %{regex: ~r/^679(.+)/, module: Phonex.FJ},
    %{regex: ~r/^358(.+)/, module: Phonex.FI},
    %{regex: ~r/^33(.+)/, module: Phonex.FR},
    %{regex: ~r/^594(.+)/, module: Phonex.GF},
    %{regex: ~r/^689(.+)/, module: Phonex.PF},
    %{regex: ~r/^262(.+)/, module: Phonex.TF},
    %{regex: ~r/^241(.+)/, module: Phonex.GA},
    %{regex: ~r/^220(.+)/, module: Phonex.GM},
    %{regex: ~r/^995(.+)/, module: Phonex.GE},
    %{regex: ~r/^49(.+)/, module: Phonex.DE},
    %{regex: ~r/^233(.+)/, module: Phonex.GH},
    %{regex: ~r/^350(.+)/, module: Phonex.GI},
    %{regex: ~r/^30(.+)/, module: Phonex.GR},
    %{regex: ~r/^299(.+)/, module: Phonex.GL},
    %{regex: ~r/^590(.+)/, module: Phonex.GP},
    %{regex: ~r/^502(.+)/, module: Phonex.GT},
    %{regex: ~r/^44(.+)/, module: Phonex.GG},
    %{regex: ~r/^224(.+)/, module: Phonex.GN},
    %{regex: ~r/^245(.+)/, module: Phonex.GW},
    %{regex: ~r/^592(.+)/, module: Phonex.GY},
    %{regex: ~r/^509(.+)/, module: Phonex.HT},
    %{regex: ~r/^672(.+)/, module: Phonex.HM},
    %{regex: ~r/^379(.+)/, module: Phonex.VA},
    %{regex: ~r/^504(.+)/, module: Phonex.HN},
    %{regex: ~r/^852(.+)/, module: Phonex.HK},
    %{regex: ~r/^36(.+)/, module: Phonex.HU},
    %{regex: ~r/^354(.+)/, module: Phonex.IS},
    %{regex: ~r/^91(.+)/, module: Phonex.IN},
    %{regex: ~r/^62(.+)/, module: Phonex.ID},
    %{regex: ~r/^98(.+)/, module: Phonex.IR},
    %{regex: ~r/^964(.+)/, module: Phonex.IQ},
    %{regex: ~r/^353(.+)/, module: Phonex.IE},
    %{regex: ~r/^44(.+)/, module: Phonex.IM},
    %{regex: ~r/^972(.+)/, module: Phonex.IL},
    %{regex: ~r/^39(.+)/, module: Phonex.IT},
    %{regex: ~r/^81(.+)/, module: Phonex.JP},
    %{regex: ~r/^44(.+)/, module: Phonex.JE},
    %{regex: ~r/^962(.+)/, module: Phonex.JO},
    %{regex: ~r/^254(.+)/, module: Phonex.KE},
    %{regex: ~r/^686(.+)/, module: Phonex.KI},
    %{regex: ~r/^850(.+)/, module: Phonex.KP},
    %{regex: ~r/^82(.+)/, module: Phonex.KR},
    %{regex: ~r/^965(.+)/, module: Phonex.KW},
    %{regex: ~r/^996(.+)/, module: Phonex.KG},
    %{regex: ~r/^856(.+)/, module: Phonex.LA},
    %{regex: ~r/^371(.+)/, module: Phonex.LV},
    %{regex: ~r/^961(.+)/, module: Phonex.LB},
    %{regex: ~r/^266(.+)/, module: Phonex.LS},
    %{regex: ~r/^231(.+)/, module: Phonex.LR},
    %{regex: ~r/^218(.+)/, module: Phonex.LY},
    %{regex: ~r/^423(.+)/, module: Phonex.LI},
    %{regex: ~r/^370(.+)/, module: Phonex.LT},
    %{regex: ~r/^352(.+)/, module: Phonex.LU},
    %{regex: ~r/^853(.+)/, module: Phonex.MO},
    %{regex: ~r/^389(.+)/, module: Phonex.MK},
    %{regex: ~r/^261(.+)/, module: Phonex.MG},
    %{regex: ~r/^265(.+)/, module: Phonex.MW},
    %{regex: ~r/^60(.+)/, module: Phonex.MY},
    %{regex: ~r/^960(.+)/, module: Phonex.MV},
    %{regex: ~r/^223(.+)/, module: Phonex.ML},
    %{regex: ~r/^356(.+)/, module: Phonex.MT},
    %{regex: ~r/^692(.+)/, module: Phonex.MH},
    %{regex: ~r/^596(.+)/, module: Phonex.MQ},
    %{regex: ~r/^222(.+)/, module: Phonex.MR},
    %{regex: ~r/^230(.+)/, module: Phonex.MU},
    %{regex: ~r/^262(.+)/, module: Phonex.YT},
    %{regex: ~r/^52(.+)/, module: Phonex.MX},
    %{regex: ~r/^691(.+)/, module: Phonex.FM},
    %{regex: ~r/^373(.+)/, module: Phonex.MD},
    %{regex: ~r/^377(.+)/, module: Phonex.MC},
    %{regex: ~r/^976(.+)/, module: Phonex.MN},
    %{regex: ~r/^382(.+)/, module: Phonex.ME},
    %{regex: ~r/^212(.+)/, module: Phonex.MA},
    %{regex: ~r/^258(.+)/, module: Phonex.MZ},
    %{regex: ~r/^95(.+)/, module: Phonex.MM},
    %{regex: ~r/^264(.+)/, module: Phonex.NA},
    %{regex: ~r/^674(.+)/, module: Phonex.NR},
    %{regex: ~r/^977(.+)/, module: Phonex.NP},
    %{regex: ~r/^31(.+)/, module: Phonex.NL},
    %{regex: ~r/^687(.+)/, module: Phonex.NC},
    %{regex: ~r/^64(.+)/, module: Phonex.NZ},
    %{regex: ~r/^505(.+)/, module: Phonex.NI},
    %{regex: ~r/^227(.+)/, module: Phonex.NE},
    %{regex: ~r/^234(.+)/, module: Phonex.NG},
    %{regex: ~r/^683(.+)/, module: Phonex.NU},
    %{regex: ~r/^672(.+)/, module: Phonex.NF},
    %{regex: ~r/^47(.+)/, module: Phonex.NO},
    %{regex: ~r/^968(.+)/, module: Phonex.OM},
    %{regex: ~r/^92(.+)/, module: Phonex.PK},
    %{regex: ~r/^680(.+)/, module: Phonex.PW},
    %{regex: ~r/^970(.+)/, module: Phonex.PS},
    %{regex: ~r/^507(.+)/, module: Phonex.PA},
    %{regex: ~r/^675(.+)/, module: Phonex.PG},
    %{regex: ~r/^595(.+)/, module: Phonex.PY},
    %{regex: ~r/^51(.+)/, module: Phonex.PE},
    %{regex: ~r/^63(.+)/, module: Phonex.PH},
    %{regex: ~r/^870(.+)/, module: Phonex.PN},
    %{regex: ~r/^48(.+)/, module: Phonex.PL},
    %{regex: ~r/^351(.+)/, module: Phonex.PT},
    %{regex: ~r/^974(.+)/, module: Phonex.QA},
    %{regex: ~r/^40(.+)/, module: Phonex.RO},
    %{regex: ~r/^7(.+)/, module: Phonex.RU},
    %{regex: ~r/^250(.+)/, module: Phonex.RW},
    %{regex: ~r/^262(.+)/, module: Phonex.RE},
    %{regex: ~r/^590(.+)/, module: Phonex.BL},
    %{regex: ~r/^290(.+)/, module: Phonex.SH},
    %{regex: ~r/^590(.+)/, module: Phonex.MF},
    %{regex: ~r/^508(.+)/, module: Phonex.PM},
    %{regex: ~r/^685(.+)/, module: Phonex.WS},
    %{regex: ~r/^378(.+)/, module: Phonex.SM},
    %{regex: ~r/^239(.+)/, module: Phonex.ST},
    %{regex: ~r/^966(.+)/, module: Phonex.SA},
    %{regex: ~r/^221(.+)/, module: Phonex.SN},
    %{regex: ~r/^381(.+)/, module: Phonex.RS},
    %{regex: ~r/^248(.+)/, module: Phonex.SC},
    %{regex: ~r/^232(.+)/, module: Phonex.SL},
    %{regex: ~r/^65(.+)/, module: Phonex.SG},
    %{regex: ~r/^421(.+)/, module: Phonex.SK},
    %{regex: ~r/^386(.+)/, module: Phonex.SI},
    %{regex: ~r/^677(.+)/, module: Phonex.SB},
    %{regex: ~r/^252(.+)/, module: Phonex.SO},
    %{regex: ~r/^27(.+)/, module: Phonex.ZA},
    %{regex: ~r/^500(.+)/, module: Phonex.GS},
    %{regex: ~r/^211(.+)/, module: Phonex.SS},
    %{regex: ~r/^34(.+)/, module: Phonex.ES},
    %{regex: ~r/^94(.+)/, module: Phonex.LK},
    %{regex: ~r/^249(.+)/, module: Phonex.SD},
    %{regex: ~r/^597(.+)/, module: Phonex.SR},
    %{regex: ~r/^268(.+)/, module: Phonex.SZ},
    %{regex: ~r/^46(.+)/, module: Phonex.SE},
    %{regex: ~r/^41(.+)/, module: Phonex.CH},
    %{regex: ~r/^963(.+)/, module: Phonex.SY},
    %{regex: ~r/^886(.+)/, module: Phonex.TW},
    %{regex: ~r/^992(.+)/, module: Phonex.TJ},
    %{regex: ~r/^255(.+)/, module: Phonex.TZ},
    %{regex: ~r/^66(.+)/, module: Phonex.TH},
    %{regex: ~r/^670(.+)/, module: Phonex.TL},
    %{regex: ~r/^228(.+)/, module: Phonex.TG},
    %{regex: ~r/^690(.+)/, module: Phonex.TK},
    %{regex: ~r/^676(.+)/, module: Phonex.TO},
    %{regex: ~r/^216(.+)/, module: Phonex.TN},
    %{regex: ~r/^90(.+)/, module: Phonex.TR},
    %{regex: ~r/^993(.+)/, module: Phonex.TM},
    %{regex: ~r/^688(.+)/, module: Phonex.TV},
    %{regex: ~r/^256(.+)/, module: Phonex.UG},
    %{regex: ~r/^380(.+)/, module: Phonex.UA},
    %{regex: ~r/^971(.+)/, module: Phonex.AE},
    %{regex: ~r/^44(.+)/, module: Phonex.GB},
    %{regex: ~r/^598(.+)/, module: Phonex.UY},
    %{regex: ~r/^998(.+)/, module: Phonex.UZ},
    %{regex: ~r/^678(.+)/, module: Phonex.VU},
    %{regex: ~r/^58(.+)/, module: Phonex.VE},
    %{regex: ~r/^84(.+)/, module: Phonex.VN},
    %{regex: ~r/^681(.+)/, module: Phonex.WF},
    %{regex: ~r/^212(.+)/, module: Phonex.EH},
    %{regex: ~r/^967(.+)/, module: Phonex.YE},
    %{regex: ~r/^260(.+)/, module: Phonex.ZM},
    %{regex: ~r/^263(.+)/, module: Phonex.ZW},
    %{regex: ~r/^358(.+)/, module: Phonex.AX}
  ]

  def match(number) do
    element = Enum.filter(@countries, fn(x) -> Regex.match?(x.regex,number) end)
    Phonex.Countries.caller(element, number)
  end

  def caller([], number) do
    raise ArgumentError, message: "Not a valid phone number."
  end

  def caller([element], number) do
    [[_ | number]] = Regex.scan(element.regex, number)
    element.module.match(number)
  end

end
